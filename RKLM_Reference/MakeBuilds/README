README

Readme file to setup, run and post-process output for the RKLM_Reference code.

1) Upon cloning the repository, generate the running output folders 

../../low_mach_gravity_{comp, psinc} 

by running 

chmod +x create_lm_comp_psinc_dirs.sh 
source create_lm_comp_psinc_dirs.sh

2) In order to store the output for a preset series of test cases, the additional folder 

../../hdf_output

can be created by modifying the script create_dirs.sh and running

chmod +x create_dirs.sh
source create_dirs.sh

3) The subdirectories of ../../hdf_output can be cleaned by running

chmod +x clean_hdf_output_test.sh
source clean_hdf_output_test.sh TEST

where TEST is one of the test cases set in 2).

4) To run a test of the form ../Input/userdata_TEST.c:

chmod +x run_test.sh
source run_test.sh TEST

This does the following:

- Cleans the running folders low_mach_gravity_{comp,psinc}
for output and cleans the output folder for the particular
test via clean_hdf_output.sh;

- Changes the test-case dependent instances in the Makefiles
using the script changetest.sh;

- Changes the output folder to the one relative to the user;

- Compiles and runs the code; copies the output from the running folders
low_mach_gravity_{comp, psinc} to the case-dependent ones in the hdf_output
subfolder;

5) In order to run the suite of tests for the paper "A semi-implicit 
numerical model for small-to-planetary scale atmospheric dynamics", run:

chmod +x run_suite.sh
source run_suite.sh

This also plots the results by calling the related matlab script. 
WARNING: this currently assumes that the tests in the matlab script
are the same run in run_suite.sh - it could be automated in the future.










